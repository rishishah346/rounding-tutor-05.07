/**
* Decimal1 Practice Page - Stage 6: Polish & Test Complete
* File: static/css/decimal1_practice.css
* Enhanced with robust error handling, accessibility, and UX improvements
* UPDATED: Font size REDUCED from 1.5rem to 1.125rem for question text
* UPDATED: Fixed step header text color and step number text color
* UPDATED: Enhanced Step X text color targeting with higher specificity
* UPDATED: Layout synchronized with examples page while preserving all previous styling
* UPDATED: Reduced MCQ option spacing and height for better fit
*/

/* =======================================
 1. CSS Variables & Enhanced Base Styles
 ======================================= */
 :root {
    --color-white: #ffffff;
    --color-black: #000000;
    --color-gray-50: #f9fafb;
    --color-gray-100: #f3f4f6;
    --color-gray-200: #e5e7eb;
    --color-gray-300: #d1d5db;
    --color-gray-400: #9ca3af;
    --color-gray-500: #6b7280;
    --color-gray-600: #4b5563;
    --color-blue-25: #f8faff;
    --color-blue-50: #eff6ff;
    --color-blue-100: #dbeafe;
    --color-blue-200: #bfdbfe;
    --color-blue-300: #93c5fd;
    --color-blue-400: #60a5fa;
    --color-blue-500: #3b82f6;
    --color-blue-600: #2563eb;
    --color-blue-700: #1d4ed8;
    --color-green-25: #f0fdf4;
    --color-green-50: #d1fae5;
    --color-green-200: #94e5c9;
    --color-green-300: #86efac;
    --color-green-400: #4ade80;
    --color-green-500: #10b981;
    --color-green-600: #059669;
    --color-green-700: #047857;
    --color-red-50: #fee2e2;
    --color-red-500: #ef4444;
    --color-red-600: #dc2626;
    --color-yellow-50: #fefce8;
    --color-yellow-200: #fde047;
    --color-yellow-400: #facc15;
    
    /* NEW: Enhanced spacing and timing variables */
    --spacing-xs: 0.25rem;
    --spacing-sm: 0.5rem;
    --spacing-md: 1rem;
    --spacing-lg: 1.5rem;
    --spacing-xl: 2rem;
    
    --transition-fast: 150ms ease-in-out;
    --transition-normal: 300ms ease-in-out;
    --transition-slow: 500ms ease-in-out;
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    
    /* NEW: Focus ring for accessibility */
    --focus-ring: 0 0 0 3px rgba(59, 130, 246, 0.5);
}

html, body {
    height: 100%;
    font-family: system-ui, -apple-system, sans-serif;
    margin: 0;
    padding: 0;
}

body {
    background-color: var(--color-gray-100);
}

/* NEW: Screen reader only content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* =======================================
 2. Enhanced Layout Structure - MATCHED TO EXAMPLES PAGE
 ======================================= */
body.decimal1-practice .container {
    height: 100vh !important;
    padding: 0 !important;
    margin: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
    max-width: none !important;
    width: 100% !important;
}

/* EXACT MATCH: Header section spacing from examples page */
body.decimal1-practice .header-section {
    flex-shrink: 0;
    padding: 1rem 2rem;
    border-bottom: 2px solid var(--color-gray-200);
    background-color: var(--color-white);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    z-index: 10;
    height: auto;
}

/* EXACT MATCH: Main content spacing from examples page */
body.decimal1-practice .main-content {
    flex: 1;
    display: flex !important;
    padding: 1rem;
    gap: 1rem;
    min-height: 0;
    overflow: hidden;
    background-color: var(--color-gray-100);
    width: 100%;
    box-sizing: border-box;
}

/* EXACT MATCH: Column widths from examples page */
body.decimal1-practice .progress-column {
    width: 10% !important;
    min-width: 150px;
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}

body.decimal1-practice .whiteboard-column {
    width: 60% !important;
    min-width: 400px;
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}

body.decimal1-practice .tutor-column {
    width: 30% !important;
    min-width: 300px;
    display: flex;
    flex-direction: column;
    flex-shrink: 0;
}

/* EXACT MATCH: Container styling from examples page */
body.decimal1-practice .progress-container,
body.decimal1-practice .whiteboard-container,
body.decimal1-practice .tutor-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: var(--color-white);
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    height: 100%;
    transition: box-shadow var(--transition-normal);
}

/* NEW: Enhanced hover effects - RESTORED */
body.decimal1-practice .progress-container:hover,
body.decimal1-practice .whiteboard-container:hover,
body.decimal1-practice .tutor-container:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px);
}

/* EXACT MATCH: Container heights from examples page */
body.decimal1-practice .progress-container {
    min-height: 500px;
}

body.decimal1-practice .whiteboard-container {
    min-height: 600px;
}

body.decimal1-practice .tutor-container {
    min-height: 500px;
}

/* =======================================
 3. Enhanced Progress Sidebar - MATCHED TO EXAMPLES PAGE
 ======================================= */
body.decimal1-practice #progress-sidebar {
    background-color: var(--color-gray-50);
    border: 1px solid var(--color-gray-200);
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 1rem;
    box-sizing: border-box;
    overflow-y: auto;
}

body.decimal1-practice #progress-sidebar h3 {
    color: #1f2937;
    font-size: clamp(1rem, 3vw, 1.125rem);
    font-weight: 700;
    margin-bottom: 1rem;
    line-height: 1.2;
}

body.decimal1-practice .progress-bar-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 200px;
}

body.decimal1-practice .progress-bar-track {
    width: 20px;
    height: 70%;
    background-color: var(--color-gray-200);
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

body.decimal1-practice #progress-bar {
    width: 100%;
    height: 20%;
    background: linear-gradient(to top, var(--color-blue-500), var(--color-blue-400));
    border-radius: 10px;
    position: absolute;
    bottom: 0;
    left: 0;
    transition: height var(--transition-slow) cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 -2px 8px rgba(59, 130, 246, 0.3);
}

/* NEW: Enhanced shimmer effect - RESTORED */
body.decimal1-practice #progress-bar::after {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: shimmerVertical 2s infinite;
}

body.decimal1-practice #progress-bar.stretch-pulse {
    animation: stretchPulse 1.5s ease-in-out infinite;
}

body.decimal1-practice #progress-percentage {
    font-weight: 700;
    font-size: clamp(1rem, 3vw, 1.25rem);
    color: var(--color-blue-600);
    margin-top: 1rem;
    text-align: center;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* =======================================
 4. Enhanced Split Whiteboard Layout - WHITE BACKGROUNDS PRESERVED
 ======================================= */
body.decimal1-practice #main-whiteboard {
    background-color: var(--color-white);
    border: 15px solid red;
    border-image: url('/static/images/whiteboard_border.jpg') 15;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    border-radius: 0;
    flex: 1;
    width: 100%;
    display: flex;
    padding: 0;
    margin: 0;
    position: relative;
    min-height: 400px;
}

body.decimal1-practice .whiteboard-left {
    width: 50%;
    height: 100%;
    overflow-y: auto;
    padding: var(--spacing-md);
    background-color: var(--color-white);
    border-right: 3px solid var(--color-gray-400);
    position: relative;
    display: flex;
    flex-direction: column;
}

body.decimal1-practice .whiteboard-right {
    width: 50%;
    height: 100%;
    overflow-y: auto;
    padding: var(--spacing-md);
    background-color: var(--color-white);
    position: relative;
    display: flex;
    flex-direction: column;
}

/* NEW: Enhanced section headers - PRESERVED */
body.decimal1-practice .section-header {
    background: var(--color-white);
    padding: 0.75rem var(--spacing-md);
    border-radius: 0.5rem;
    margin-bottom: var(--spacing-md);
    box-shadow: var(--shadow-sm);
    border-left: 4px solid var(--color-blue-500);
    position: sticky;
    top: 0;
    z-index: 5;
    backdrop-filter: blur(8px);
}

body.decimal1-practice .whiteboard-right .section-header {
    border-left-color: var(--color-green-500);
}

body.decimal1-practice .section-header h3 {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 600;
    color: #1f2937;
}

body.decimal1-practice .section-header p {
    margin: 0.25rem 0 0 0;
    font-size: 0.875rem;
    color: #6b7280;
}

/* CRITICAL: WHITE BACKGROUNDS AND NO BORDERS - PRESERVED */
body.decimal1-practice .examples-content,
body.decimal1-practice .practice-content {
    flex: 1;
    padding: var(--spacing-sm);
    background-color: var(--color-white);
    border-radius: 0.5rem;
    box-shadow: none; /* REMOVED: inset shadow for clean look */
    border: none; /* REMOVED: visible border */
    overflow-y: auto;
    transition: all var(--transition-normal);
}

/* PRESERVED: Enhanced hover effects */
body.decimal1-practice .examples-content:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}

body.decimal1-practice .practice-content:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-2px);
}

/* NEW: Enhanced custom scrollbars - RESTORED */
body.decimal1-practice .whiteboard-left::-webkit-scrollbar,
body.decimal1-practice .whiteboard-right::-webkit-scrollbar,
body.decimal1-practice .examples-content::-webkit-scrollbar,
body.decimal1-practice .practice-content::-webkit-scrollbar {
    width: 8px;
}

body.decimal1-practice .whiteboard-left::-webkit-scrollbar-track,
body.decimal1-practice .whiteboard-right::-webkit-scrollbar-track,
body.decimal1-practice .examples-content::-webkit-scrollbar-track,
body.decimal1-practice .practice-content::-webkit-scrollbar-track {
    background: var(--color-gray-100);
    border-radius: 4px;
}

body.decimal1-practice .whiteboard-left::-webkit-scrollbar-thumb,
body.decimal1-practice .examples-content::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--color-blue-300), var(--color-blue-400));
    border-radius: 4px;
    transition: background var(--transition-fast);
}

body.decimal1-practice .whiteboard-right::-webkit-scrollbar-thumb,
body.decimal1-practice .practice-content::-webkit-scrollbar-thumb {
    background: linear-gradient(to bottom, var(--color-green-300), var(--color-green-400));
    border-radius: 4px;
    transition: background var(--transition-fast);
}

body.decimal1-practice .whiteboard-left::-webkit-scrollbar-thumb:hover,
body.decimal1-practice .examples-content::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, var(--color-blue-400), var(--color-blue-500));
}

body.decimal1-practice .whiteboard-right::-webkit-scrollbar-thumb:hover,
body.decimal1-practice .practice-content::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(to bottom, var(--color-green-400), var(--color-green-500));
}

/* NEW: Enhanced dividing line with animated shadow - RESTORED */
body.decimal1-practice .whiteboard-left::after {
    content: '';
    position: absolute;
    top: 0;
    right: -1.5px;
    width: 0;
    height: 100%;
    box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
    z-index: 2;
    animation: pulseGlow 3s ease-in-out infinite;
}

/* EXACT MATCH: Navigation buttons from examples page */
body.decimal1-practice .whiteboard-container .flex-shrink-0 {
    padding: 1rem;
    border-top: 1px solid var(--color-gray-200);
    background-color: var(--color-gray-50);
}

body.decimal1-practice .whiteboard-container .flex-shrink-0 .flex {
    gap: 1rem;
    align-items: center;
    justify-content: space-between;
}

/* =======================================
 5. Enhanced Tutor Sidebar - RESTORED
 ======================================= */
body.decimal1-practice #tutor-avatar {
    text-align: center;
    padding: var(--spacing-sm);
}

body.decimal1-practice #tutor-avatar > div {
    width: clamp(3rem, 8vw, 4rem);
    height: clamp(3rem, 8vw, 4rem);
    background: linear-gradient(135deg, var(--color-blue-100), var(--color-blue-200));
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto;
    border: 3px solid var(--color-blue-500);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    transition: transform var(--transition-normal);
}

body.decimal1-practice #tutor-avatar > div:hover {
    transform: scale(1.05);
}

body.decimal1-practice #tutor-avatar span {
    font-size: clamp(1rem, 3vw, 1.5rem);
}

body.decimal1-practice #tutor-avatar p {
    font-size: clamp(0.75rem, 2vw, 0.875rem);
    color: var(--color-gray-500);
    margin-top: var(--spacing-sm);
    font-weight: 500;
}

body.decimal1-practice #speech-bubble {
    background-color: var(--color-white);
    border: 2px solid var(--color-gray-200);
    border-radius: 0.75rem;
    position: relative;
    box-shadow: var(--shadow-md);
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    transition: all var(--transition-normal);
    transform: translateZ(0);
}

body.decimal1-practice #speech-bubble:hover {
    box-shadow: var(--shadow-lg);
    transform: translateY(-1px) translateZ(0);
}

body.decimal1-practice #speech-bubble::before {
    content: '';
    position: absolute;
    left: -12px;
    top: 32px;
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-right: 15px solid var(--color-gray-200);
    z-index: 1;
}

body.decimal1-practice #speech-bubble::after {
    content: '';
    position: absolute;
    left: -10px;
    top: 32px;
    width: 0;
    height: 0;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    border-right: 15px solid var(--color-white);
    z-index: 2;
}

body.decimal1-practice #tutor-text {
    color: #374151;
    line-height: 1.6;
    font-size: clamp(0.875rem, 2vw, 1rem);
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    width: 100%;
    box-sizing: border-box;
    word-wrap: break-word;
    overflow-wrap: break-word;
    padding: var(--spacing-md);
    scrollbar-width: thin;
    scrollbar-color: var(--color-gray-300) transparent;
    hyphens: auto;
    word-break: break-word;
    overflow-wrap: anywhere;
}

body.decimal1-practice #tutor-text::-webkit-scrollbar {
    width: 6px;
}

body.decimal1-practice #tutor-text::-webkit-scrollbar-track {
    background: transparent;
}

body.decimal1-practice #tutor-text::-webkit-scrollbar-thumb {
    background-color: var(--color-gray-300);
    border-radius: 3px;
}

body.decimal1-practice #tutor-text::-webkit-scrollbar-thumb:hover {
    background-color: var(--color-gray-400);
}

/* =======================================
 6. Enhanced Examples Content Styling - WHITE BACKGROUNDS + BLACK TEXT + BLUE STEP HEADERS
 ======================================= */
body.decimal1-practice .example-detailed {
    transition: all var(--transition-normal);
    overflow: hidden;
    border-radius: 0.75rem;
    background-color: var(--color-white);
    border: none;
}

body.decimal1-practice .example-header {
    background: var(--color-white);
    border-bottom: none; /* REMOVED: border for clean look */
}

/* PRESERVED: Make example titles and text black */
body.decimal1-practice .example-header h4,
body.decimal1-practice .example-detailed h3,
body.decimal1-practice .example-detailed h4:not(.step-header h4),
body.decimal1-practice .examples-content h4:not(.step-header h4) {
    color: #000000 !important;
}

body.decimal1-practice .example-header .text-blue-700,
body.decimal1-practice .example-detailed .text-blue-700:not(.step-header *),
body.decimal1-practice .examples-content .text-blue-700:not(.step-header *) {
    color: #000000 !important;
}

/* PRESERVED: Make example question text black */
body.decimal1-practice .example-detailed .text-sm.text-blue-700,
body.decimal1-practice .examples-content .text-sm.text-blue-700,
body.decimal1-practice .example-header .text-sm.text-blue-700 {
    color: #000000 !important;
}

/* PRESERVED: Make step explanation text black */
body.decimal1-practice .step-explanation,
body.decimal1-practice .step-explanation p,
body.decimal1-practice .text-blue-600:not(.step-header *):not(.step-number):not(.font-semibold) {
    color: #000000 !important;
}

/* =======================================
 ENHANCED STEP HEADER TARGETING - HIGHEST SPECIFICITY - PRESERVED
 ======================================= */

/* ULTRA HIGH SPECIFICITY: Target all possible variations of "Step X" text */
body.decimal1-practice .examples-content .step .step-header h5,
body.decimal1-practice .examples-content .step .step-header .font-semibold,
body.decimal1-practice .examples-content .step-header h5,
body.decimal1-practice .examples-content .step-header .font-semibold,
body.decimal1-practice .examples-content .step h5,
body.decimal1-practice .examples-content .step .font-semibold,
body.decimal1-practice .whiteboard-left .step .step-header h5,
body.decimal1-practice .whiteboard-left .step .step-header .font-semibold,
body.decimal1-practice .whiteboard-left .step-header h5,
body.decimal1-practice .whiteboard-left .step-header .font-semibold,
body.decimal1-practice .whiteboard-left .step h5,
body.decimal1-practice .whiteboard-left .step .font-semibold,
body.decimal1-practice .example-detailed .step .step-header h5,
body.decimal1-practice .example-detailed .step .step-header .font-semibold,
body.decimal1-practice .example-detailed .step-header h5,
body.decimal1-practice .example-detailed .step-header .font-semibold,
body.decimal1-practice .example-detailed .step h5,
body.decimal1-practice .example-detailed .step .font-semibold,
body.decimal1-practice .example-steps .step .step-header h5,
body.decimal1-practice .example-steps .step .step-header .font-semibold,
body.decimal1-practice .example-steps .step-header h5,
body.decimal1-practice .example-steps .step-header .font-semibold,
body.decimal1-practice .example-steps .step h5,
body.decimal1-practice .example-steps .step .font-semibold,
body.decimal1-practice .example-steps h5,
body.decimal1-practice .example-steps h4,
body.decimal1-practice .example-steps .font-semibold {
    color: var(--color-blue-700) !important;
}

/* ULTIMATE FALLBACK: Target all h5 and .font-semibold in step contexts */
body.decimal1-practice .step-header h5,
body.decimal1-practice .step h5,
body.decimal1-practice .step-header .font-semibold,
body.decimal1-practice .step .font-semibold {
    color: var(--color-blue-700) !important;
}

/* PRESERVED: Step number text inside blue circles - make it white */
body.decimal1-practice .step-number {
    background: linear-gradient(135deg, var(--color-blue-500), var(--color-blue-600));
    box-shadow: var(--shadow-sm);
    transition: all var(--transition-normal);
    color: white !important;
}

body.decimal1-practice .step {
    transition: all var(--transition-normal);
    border: none; /* REMOVED: border for clean look */
    border-radius: 0.5rem;
    overflow: hidden;
    background-color: var(--color-white); /* PRESERVED: white background */
}

body.decimal1-practice .step:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
}

body.decimal1-practice .step:hover .step-number {
    transform: scale(1.1);
    box-shadow: var(--shadow-md);
}

body.decimal1-practice .math-display {
    font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
    line-height: 1.2;
    letter-spacing: 0.05em;
    transition: all var(--transition-normal);
}

body.decimal1-practice .step-visual {
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

/* RESTORED: Enhanced step visual hover effect */
body.decimal1-practice .step-visual::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left var(--transition-slow);
}

body.decimal1-practice .step:hover .step-visual::before {
    left: 100%;
}

body.decimal1-practice .annotation {
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    transition: color var(--transition-fast);
}

body.decimal1-practice .reference-card,
body.decimal1-practice .tips-card {
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

body.decimal1-practice .reference-card:hover,
body.decimal1-practice .tips-card:hover {
    box-shadow: var(--shadow-md);
    transform: translateY(-2px);
}

body.decimal1-practice .tips-card {
    background: linear-gradient(135deg, #fefce8, #fef3c7);
    border-color: #fbbf24;
}

/* =======================================
 7. Enhanced Practice Question Styling - FONT SIZE REDUCED + REDUCED SPACING
 ======================================= */

/* HIGH SPECIFICITY SELECTORS FOR QUESTION TEXT - FONT SIZE REDUCED */
body.decimal1-practice #question-text,
body.decimal1-practice div#question-text,
body.decimal1-practice .question-area #question-text,
body.decimal1-practice #practice-content #question-container #question-text {
    font-size: 1.125rem !important;
    font-weight: 600 !important;
    line-height: 1.4 !important;
    color: #1f2937 !important;
    margin-bottom: 1.5rem !important;
}

/* Override any Tailwind text-sm classes */
body.decimal1-practice #question-text.text-sm {
    font-size: 1.125rem !important;
}

/* PRESERVED: Remove border from innermost container */
body.decimal1-practice .question-area,
body.decimal1-practice #question-container {
    border: none !important;
    box-shadow: none !important;
    background-color: transparent !important;
}

/* PRESERVED: Reverted to original practice container sizing */
body.decimal1-practice #question-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin-bottom: 1.5rem !important;
}

/* Make choices container with reduced spacing */
body.decimal1-practice #choices-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    margin-bottom: var(--spacing-md);
    gap: 0.75rem;
}

/* Adjust practice content container to original setup */
body.decimal1-practice #practice-content {
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* Make the space-y-4 div with original constraints */
body.decimal1-practice #practice-content > .space-y-4 {
    flex: 1;
    display: flex;
    flex-direction: column;
}

/* ENHANCED CHOICE ITEMS FONT SIZE - REDUCED HEIGHT */
body.decimal1-practice .choice-item,
body.decimal1-practice #choices-container .choice-item {
    transition: all var(--transition-fast);
    cursor: pointer;
    border: 1px solid var(--color-gray-200);
    border-radius: 0.375rem;
    padding: 1rem !important;
    margin-bottom: 0;
    font-size: 1rem !important;
    position: relative;
    overflow: hidden;
    line-height: 1.3 !important;
}

/* RESTORED: Enhanced choice item interactions */
body.decimal1-practice .choice-item::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
    transition: left var(--transition-normal);
    z-index: 0;
}

body.decimal1-practice .choice-item:hover::before {
    left: 100%;
}

body.decimal1-practice .choice-item:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
    background-color: var(--color-gray-50);
    border-color: var(--color-blue-300);
}

body.decimal1-practice .choice-item:focus {
    outline: none;
    box-shadow: var(--focus-ring);
    border-color: var(--color-blue-500);
}

body.decimal1-practice .choice-item.selected {
    border-width: 2px;
    border-color: var(--color-blue-500);
    background-color: var(--color-blue-50);
    transform: translateY(-1px);
}

body.decimal1-practice .choice-item.bg-green-50 {
    background-color: var(--color-green-50);
    border-color: var(--color-green-500);
    border-width: 2px;
}

body.decimal1-practice .choice-item.bg-red-50 {
    background-color: var(--color-red-50);
    border-color: var(--color-red-500);
    border-width: 2px;
}

/* RESTORED: Enhanced button styling */
body.decimal1-practice #submit-answer,
body.decimal1-practice #next-button,
body.decimal1-practice #return-to-examples,
body.decimal1-practice #continue-practice {
    transition: all var(--transition-normal);
    font-weight: 500;
    border-radius: 0.375rem;
    box-shadow: var(--shadow-sm);
    position: relative;
    overflow: hidden;
}

body.decimal1-practice #submit-answer::before,
body.decimal1-practice #next-button::before,
body.decimal1-practice #return-to-examples::before,
body.decimal1-practice #continue-practice::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left var(--transition-normal);
}

body.decimal1-practice #submit-answer:hover:not(:disabled)::before,
body.decimal1-practice #next-button:hover::before,
body.decimal1-practice #return-to-examples:hover::before,
body.decimal1-practice #continue-practice:hover::before {
    left: 100%;
}

body.decimal1-practice #submit-answer:hover:not(:disabled),
body.decimal1-practice #next-button:hover,
body.decimal1-practice #return-to-examples:hover,
body.decimal1-practice #continue-practice:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-md);
}

body.decimal1-practice #submit-answer:focus,
body.decimal1-practice #next-button:focus,
body.decimal1-practice #return-to-examples:focus,
body.decimal1-practice #continue-practice:focus {
    outline: none;
    box-shadow: var(--focus-ring);
}

body.decimal1-practice #submit-answer:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none;
}

/* RESTORED: Loading button state */
body.decimal1-practice #submit-answer.loading {
    position: relative;
    color: transparent;
}

body.decimal1-practice #submit-answer.loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid transparent;
    border-top: 2px solid currentColor;
    border-radius: 50%;
    animation: spin 1s linear infinite;
}

/* =======================================
 8. Enhanced Feedback & States - RESTORED
 ======================================= */
body.decimal1-practice .feedback-area {
    transition: all var(--transition-normal);
    border-radius: 0.5rem;
    position: relative;
    overflow: hidden;
}

body.decimal1-practice .feedback-area::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: slideInEffect 0.8s ease-out;
}

body.decimal1-practice .feedback-area.bg-green-50 {
    background: linear-gradient(135deg, var(--color-green-50), var(--color-green-25));
    border-color: var(--color-green-200);
}

body.decimal1-practice .feedback-area.bg-red-50 {
    background: linear-gradient(135deg, var(--color-red-50), #fef2f2);
    border-color: var(--color-red-200);
}

body.decimal1-practice .stage-indicator {
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

body.decimal1-practice .stage-indicator::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.1), transparent);
    animation: shimmerGreen 2s infinite;
}

body.decimal1-practice .stage-indicator.stage-completed {
    background: linear-gradient(135deg, var(--color-green-50), var(--color-green-25));
    border-color: var(--color-green-300);
    transform: scale(1.02);
    box-shadow: var(--shadow-md);
}

body.decimal1-practice .stage-indicator.stage-completed::before {
    background: linear-gradient(90deg, transparent, rgba(34, 197, 94, 0.3), transparent);
    animation: shimmerGreen 1s ease-out;
}

body.decimal1-practice .transition-message {
    animation: transitionSlideIn 0.8s ease-out;
    box-shadow: var(--shadow-lg);
}

body.decimal1-practice .transition-message button {
    transition: all var(--transition-normal);
}

body.decimal1-practice .transition-message button:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: var(--shadow-md);
}

body.decimal1-practice .progress-info {
    transition: all var(--transition-normal);
}

body.decimal1-practice .progress-info:hover {
    box-shadow: var(--shadow-sm);
    transform: translateY(-1px);
}

/* =======================================
 9. Error Handling & Status Indicators - RESTORED
 ======================================= */

/* Error container styling */
#error-container {
    animation: slideInFromRight 0.5s ease-out;
}

#error-container .bg-red-50 {
    backdrop-filter: blur(8px);
    border: 2px solid var(--color-red-200);
}

#error-container button {
    transition: all var(--transition-fast);
}

#error-container button:hover {
    transform: scale(1.05);
}

/* Connection status styling */
#connection-status {
    animation: slideInFromLeft 0.5s ease-out;
}

#connection-status .bg-yellow-50 {
    backdrop-filter: blur(8px);
}

#connection-indicator {
    animation: pulse 2s ease-in-out infinite;
}

/* Toast notifications for better UX */
.toast-notification {
    position: fixed;
    top: 20px;
    right: 20px;
    z-index: 100;
    background: var(--color-white);
    border: 1px solid var(--color-gray-200);
    border-radius: 0.5rem;
    box-shadow: var(--shadow-lg);
    padding: var(--spacing-md);
    max-width: 300px;
    animation: toastSlideIn 0.3s ease-out;
}

.toast-notification.success {
    border-left: 4px solid var(--color-green-500);
}

.toast-notification.error {
    border-left: 4px solid var(--color-red-500);
}

.toast-notification.warning {
    border-left: 4px solid var(--color-yellow-400);
}

/* =======================================
 10. Enhanced Animations - RESTORED
 ======================================= */
@keyframes shimmerVertical {
    0% { transform: translateY(100%); }
    100% { transform: translateY(-100%); }
}

@keyframes stretchPulse {
    0%, 100% { 
        box-shadow: 0 -2px 8px rgba(59, 130, 246, 0.3);
        filter: brightness(1);
    }
    50% { 
        box-shadow: 0 -4px 16px rgba(59, 130, 246, 0.6), 0 0 20px rgba(59, 130, 246, 0.4);
        filter: brightness(1.2);
    }
}

@keyframes shimmerGreen {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes stepFadeIn {
    from {
        opacity: 0;
        transform: translateY(10px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes transitionSlideIn {
    from {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

@keyframes pulseGlow {
    0%, 100% { 
        box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
    }
    50% { 
        box-shadow: 2px 0 8px rgba(59, 130, 246, 0.3);
    }
}

@keyframes slideInEffect {
    0% { left: -100%; }
    100% { left: 100%; }
}

@keyframes slideInFromRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideInFromLeft {
    from {
        transform: translateX(-100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes toastSlideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes pulse {
    0%, 100% { 
        opacity: 1;
        transform: scale(1);
    }
    50% { 
        opacity: 0.7;
        transform: scale(1.1);
    }
}

/* Focus-within effects for better accessibility */
body.decimal1-practice .choice-item:focus-within,
body.decimal1-practice button:focus-within {
    box-shadow: var(--focus-ring);
}

/* Reduced motion support for accessibility */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

/* =======================================
 11. Enhanced Typography & Responsiveness - EXACT MATCH TO EXAMPLES
 ======================================= */
h1.text-3xl {
    margin-top: 5px;
    margin-bottom: 10px;
    text-align: center;
    font-size: 2.8125rem;
    line-height: 1.2;
}

h2, h3 {
    font-weight: 600;
}

h2 {
    font-size: 1.25rem;
    margin-bottom: var(--spacing-md);
}

h3 {
    font-size: 1.125rem;
    margin-bottom: var(--spacing-sm);
}

button {
    transition: all var(--transition-fast);
}

button:hover {
    transform: translateY(-2px);
}

.bg-blue-600 {
    background-color: var(--color-blue-600);
    color: var(--color-white);
}

.bg-blue-600:hover {
    background-color: var(--color-blue-700);
}

.bg-green-600 {
    background-color: var(--color-green-600);
    color: var(--color-white);
}

.bg-green-600:hover {
    background-color: var(--color-green-700);
}

/* =======================================
 12. Enhanced Responsive Design - MATCHED TO EXAMPLES PAGE
 ======================================= */

/* Very large screens - EXACT MATCH */
@media (min-width: 1800px) {
    body.decimal1-practice .main-content {
        max-width: 1600px;
        margin: 0 auto;
    }
}

/* Large screens - EXACT MATCH */
@media (min-width: 1400px) and (max-width: 1799px) {
    body.decimal1-practice .progress-column {
        width: 12% !important;
    }
    
    body.decimal1-practice .whiteboard-column {
        width: 58% !important;
    }
    
    body.decimal1-practice .tutor-column {
        width: 30% !important;
    }
}

/* Medium-large screens - EXACT MATCH */
@media (min-width: 1200px) and (max-width: 1399px) {
    body.decimal1-practice .progress-column {
        width: 10% !important;
    }
    
    body.decimal1-practice .whiteboard-column {
        width: 60% !important;
    }
    
    body.decimal1-practice .tutor-column {
        width: 30% !important;
    }
}

/* Smaller laptops - EXACT MATCH */
@media (min-width: 1000px) and (max-width: 1199px) {
    body.decimal1-practice .main-content {
        padding: 0.5rem;
        gap: 0.5rem;
    }
    
    body.decimal1-practice .progress-column {
        width: 8% !important;
        min-width: 120px;
    }
    
    body.decimal1-practice .whiteboard-column {
        width: 64% !important;
    }
    
    body.decimal1-practice .tutor-column {
        width: 28% !important;
        min-width: 280px;
    }
    
    body.decimal1-practice #tutor-text {
        font-size: 0.9rem;
    }
    
    body.decimal1-practice #question-text {
        font-size: 1rem !important;
    }
    
    body.decimal1-practice .choice-item {
        font-size: 0.9rem !important;
    }
}

/* Tablets and smaller - EXACT MATCH */
@media (max-width: 899px) {
    body.decimal1-practice .container {
        height: auto !important;
    }
    
    body.decimal1-practice .main-content {
        flex-direction: column;
        height: auto;
        padding: 0.5rem;
        gap: 0.5rem;
    }
    
    body.decimal1-practice .progress-column,
    body.decimal1-practice .whiteboard-column,
    body.decimal1-practice .tutor-column {
        width: 100% !important;
        min-width: auto;
        margin-bottom: 0;
    }
    
    body.decimal1-practice .progress-container {
        min-height: 150px;
        max-height: 200px;
    }
    
    body.decimal1-practice .whiteboard-container {
        min-height: 400px;
        max-height: 500px;
    }
    
    body.decimal1-practice .tutor-container {
        min-height: 300px;
        max-height: 400px;
    }
    
    /* Enhanced mobile whiteboard layout */
    body.decimal1-practice #main-whiteboard {
        flex-direction: column;
        padding: var(--spacing-sm);
        aspect-ratio: 4/3;
        min-height: 300px;
    }
    
    body.decimal1-practice .whiteboard-left,
    body.decimal1-practice .whiteboard-right {
        width: 100%;
        height: 50%;
        min-height: 250px;
    }
    
    body.decimal1-practice .whiteboard-left {
        border-right: none;
        border-bottom: 3px solid var(--color-gray-400);
        padding-bottom: var(--spacing-md);
        margin-bottom: var(--spacing-sm);
    }
    
    body.decimal1-practice .whiteboard-left::after {
        display: none;
    }
    
    body.decimal1-practice .whiteboard-right {
        padding-top: var(--spacing-sm);
    }
    
    body.decimal1-practice #question-text {
        font-size: 1rem !important;
    }
    
    body.decimal1-practice .choice-item {
        font-size: 0.9rem !important;
        padding: 1rem !important;
    }
}

/* Very small screens - EXACT MATCH */
@media (max-width: 600px) {
    body.decimal1-practice .header-section {
        padding: 0.5rem 1rem;
    }
    
    body.decimal1-practice .header-section h1 {
        font-size: 1.5rem;
    }
    
    body.decimal1-practice .main-content {
        padding: 0.25rem;
        gap: 0.25rem;
    }
    
    body.decimal1-practice .progress-container {
        min-height: 120px;
        max-height: 150px;
    }
    
    body.decimal1-practice .whiteboard-container {
        min-height: 300px;
        max-height: 400px;
    }
    
    body.decimal1-practice .tutor-container {
        min-height: 250px;
        max-height: 350px;
    }
    
    body.decimal1-practice #math-display {
        font-size: 1.5rem;
    }
    
    body.decimal1-practice #tutor-text {
        font-size: 0.85rem;
    }
    
    body.decimal1-practice #question-text {
        font-size: 0.9rem !important;
    }
    
    body.decimal1-practice .choice-item {
        font-size: 0.8rem !important;
        padding: var(--spacing-sm) !important;
    }
}

/* =======================================
 13. Final Utilities & Accessibility
 ======================================= */

/* Utility for hiding elements accessibly */
.visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
}

/* Enhanced focus indicators */
body.decimal1-practice *:focus-visible {
    outline: 3px solid var(--color-blue-500);
    outline-offset: 2px;
    border-radius: 0.25rem;
}

/* Final performance optimization */
body.decimal1-practice *,
body.decimal1-practice *::before,
body.decimal1-practice *::after {
    box-sizing: border-box;
}

/* Ensure proper z-index stacking */
body.decimal1-practice .main-content { z-index: 1; }
body.decimal1-practice .section-header { z-index: 5; }
body.decimal1-practice .header-section { z-index: 10; }
body.decimal1-practice #error-container { z-index: 50; }
body.decimal1-practice #connection-status { z-index: 40; }
body.decimal1-practice .loading-overlay { z-index: 999; }
body.decimal1-practice .offline-mode { z-index: 1000; }

/* Add this to the END of your decimal1_practice.css file */

/* CONTINUE BUTTON DISABLED STATE FIX - Faded Blue Like Submit Button */
/* Same blue color but dimmed/faded, exactly like Submit button disabled state */

body.decimal1-practice #continue-practice:disabled {
    background-color: #93c5fd !important; /* Light blue (blue-300) - faded version of blue-600 */
    border-color: #93c5fd !important;
    color: white !important; /* Keep white text */
    cursor: not-allowed !important;
    opacity: 0.7 !important; /* Slight opacity for extra fading effect */
    box-shadow: none !important;
    transform: none !important;
}

/* Prevent hover effects when disabled */
body.decimal1-practice #continue-practice:disabled:hover {
    background-color: #93c5fd !important; /* Stay faded blue */
    border-color: #93c5fd !important;
    color: white !important;
    transform: none !important;
    box-shadow: none !important;
    opacity: 0.7 !important;
}

/* Prevent focus effects when disabled */
body.decimal1-practice #continue-practice:disabled:focus {
    outline: none !important;
    box-shadow: none !important;
    ring: none !important;
    background-color: #93c5fd !important;
    opacity: 0.7 !important;
}

/* Override any ::before pseudo-element effects when disabled */
body.decimal1-practice #continue-practice:disabled::before {
    display: none !important;
}

/* Also handle the [disabled] attribute selector */
body.decimal1-practice #continue-practice[disabled] {
    background-color: #93c5fd !important; /* Light blue - faded version */
    border-color: #93c5fd !important;
    color: white !important;
    cursor: not-allowed !important;
    opacity: 0.7 !important;
    box-shadow: none !important;
    transform: none !important;
}

body.decimal1-practice #continue-practice[disabled]:hover {
    background-color: #93c5fd !important;
    border-color: #93c5fd !important;
    color: white !important;
    transform: none !important;
    box-shadow: none !important;
    opacity: 0.7 !important;
}

body.decimal1-practice #continue-practice[disabled]:focus {
    outline: none !important;
    box-shadow: none !important;
    background-color: #93c5fd !important;
    opacity: 0.7 !important;
}

body.decimal1-practice #continue-practice[disabled]::before {
    display: none !important;
}

body.decimal1-practice #continue-practice {
    width: auto !important; /* Let it size naturally like Return button */
    min-width: auto !important;
    padding-left: 1.5rem !important; /* Same as Return button (px-6) */
    padding-right: 1.5rem !important; /* Same as Return button (px-6) */
    flex: none !important;
}

/* Ensure Return button keeps its original sizing */
body.decimal1-practice #return-to-examples {
    width: auto !important; /* Original auto width */
    min-width: auto !important;
    max-width: none !important;
    flex: none !important;
}

/* Alternative: If they're still not matching, force them to be the same */
/* Uncomment this section if the above doesn't work perfectly */

body.decimal1-practice #return-to-examples,
body.decimal1-practice #continue-practice {
    min-width: 200px !important;
    width: auto !important;
    padding-left: 1.5rem !important;
    padding-right: 1.5rem !important;
    white-space: nowrap !important;
    flex: none !important;
}

/* Add this to your decimal1_practice.css file to make Submit Answer button green */

/* SUBMIT ANSWER BUTTON - Green styling to match Practice Questions section */

/* Green enabled state - matches the Practice Questions header green */
body.decimal1-practice #submit-answer {
    background-color: #059669 !important; /* green-600 - matches Practice Questions section */
    border-color: #059669 !important;
    color: white !important;
}

/* Green hover state - darker green */
body.decimal1-practice #submit-answer:hover:not(:disabled) {
    background-color: #047857 !important; /* green-700 - darker on hover */
    border-color: #047857 !important;
    color: white !important;
}

/* Green focus state */
body.decimal1-practice #submit-answer:focus {
    background-color: #059669 !important;
    border-color: #059669 !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(5, 150, 105, 0.5) !important; /* Green focus ring */
}

/* Disabled state - darker green for better text readability */
body.decimal1-practice #submit-answer:disabled {
    background-color: #10b981 !important; /* green-500 - darker than before but lighter than enabled */
    border-color: #10b981 !important;
    color: white !important;
    cursor: not-allowed !important;
    opacity: 0.8 !important;
    box-shadow: none !important;
    transform: none !important;
}

/* Disabled hover state - stay darker green */
body.decimal1-practice #submit-answer:disabled:hover {
    background-color: #10b981 !important; /* Stay darker green */
    border-color: #10b981 !important;
    color: white !important;
    transform: none !important;
    box-shadow: none !important;
    opacity: 0.8 !important;
}

/* Disabled focus state */
body.decimal1-practice #submit-answer:disabled:focus {
    outline: none !important;
    box-shadow: none !important;
    background-color: #10b981 !important;
}

/* Override any ::before pseudo-element effects when disabled */
body.decimal1-practice #submit-answer:disabled::before {
    display: none !important;
}

/* Also handle the [disabled] attribute selector */
body.decimal1-practice #submit-answer[disabled] {
    background-color: #10b981 !important; /* Darker green for readability */
    border-color: #10b981 !important;
    color: white !important;
    cursor: not-allowed !important;
    opacity: 0.8 !important;
    box-shadow: none !important;
    transform: none !important;
}

body.decimal1-practice #submit-answer[disabled]:hover {
    background-color: #10b981 !important;
    border-color: #10b981 !important;
    color: white !important;
    transform: none !important;
    box-shadow: none !important;
    opacity: 0.8 !important;
}

body.decimal1-practice #submit-answer[disabled]:focus {
    outline: none !important;
    box-shadow: none !important;
    background-color: #10b981 !important;
}

body.decimal1-practice #submit-answer[disabled]::before {
    display: none !important;
}

/* Add this to your decimal1_practice.css file to extend progress bar and hide text */

/* PROGRESS BAR CONTAINER - Remove text and extend bar */

/* Hide the "Progress through the lesson" text */
body.decimal1-practice #progress-sidebar h3 {
    display: none !important;
}

/* Extend the progress bar container to use more space */
body.decimal1-practice .progress-bar-container {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start !important; /* Start from top instead of center */
    min-height: 200px;
    padding-top: 1rem !important; /* Small gap from top */
    padding-bottom: 1rem !important; /* Small gap from bottom */
}

/* Make the progress bar track much taller - extends further down */
body.decimal1-practice .progress-bar-track {
    width: 20px;
    height: calc(100% - 4rem) !important; /* Take most of container height minus padding and percentage text */
    background-color: var(--color-gray-200);
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Adjust the progress percentage position - moved further down */
body.decimal1-practice #progress-percentage {
    font-weight: 700;
    font-size: clamp(1rem, 3vw, 1.25rem);
    color: var(--color-blue-600);
    margin-top: 1.5rem !important; /* Increased margin to push it down */
    text-align: center;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Reduce padding in the progress sidebar to maximize space */
body.decimal1-practice #progress-sidebar {
    background-color: var(--color-gray-50);
    border: 1px solid var(--color-gray-200);
    height: 100%;
    display: flex;
    flex-direction: column;
    padding: 0.5rem !important; /* Reduced from 1rem */
    box-sizing: border-box;
    overflow-y: auto;
}

/* =======================================
 Progress Bar with Increments - Updated CSS
 Add this to both decimal1_examples.css and decimal1_practice.css
 ======================================= */

/* Updated Progress Bar Container - Horizontal Layout */
body.decimal1-examples .progress-bar-container,
body.decimal1-practice .progress-bar-container {
    flex: 1;
    display: flex;
    flex-direction: row; /* Changed from column to row */
    align-items: flex-start; /* Changed from center */
    justify-content: flex-start; /* Changed from center */
    min-height: 200px;
    padding: 1rem;
    gap: 1rem; /* Add gap between progress bar and labels */
}

/* Left side container for progress bar and percentage */
body.decimal1-examples .progress-bar-left,
body.decimal1-practice .progress-bar-left {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 60px; /* Fixed width for progress bar area */
}

/* Vertical Progress Bar Track - Moved to left */
body.decimal1-examples .progress-bar-track,
body.decimal1-practice .progress-bar-track {
    width: 20px;
    height: 300px; /* Increased height for better visibility */
    background-color: var(--color-gray-200);
    border-radius: 10px;
    position: relative;
    overflow: hidden;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Progress Bar Fill */
body.decimal1-examples #progress-bar,
body.decimal1-practice #progress-bar {
    width: 100%;
    height: 20%; /* Will be updated by JavaScript */
    background: linear-gradient(to top, var(--color-blue-500), var(--color-blue-400));
    border-radius: 10px;
    position: absolute;
    bottom: 0;
    left: 0;
    transition: height var(--transition-slow, 0.8s) cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 -2px 8px rgba(59, 130, 246, 0.3);
}

/* Progress Percentage Display - Below progress bar */
body.decimal1-examples #progress-percentage,
body.decimal1-practice #progress-percentage {
    font-weight: 700;
    font-size: clamp(1rem, 3vw, 1.25rem);
    color: var(--color-blue-600);
    margin-top: 1rem;
    text-align: center;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* Right side container for labels */
body.decimal1-examples .progress-bar-right,
body.decimal1-practice .progress-bar-right {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: 300px; /* Match progress bar height */
    padding-left: 1rem;
}

/* Progress increment markers */
body.decimal1-examples .progress-increment,
body.decimal1-practice .progress-increment {
    display: flex;
    align-items: center;
    position: relative;
    height: 50%;
    padding: 0.5rem 0;
}

/* Connecting line from progress bar to label */
body.decimal1-examples .progress-increment::before,
body.decimal1-practice .progress-increment::before {
    content: '';
    position: absolute;
    left: -1rem;
    top: 50%;
    width: 1rem;
    height: 2px;
    background-color: var(--color-gray-300);
    transform: translateY(-1px);
}

/* Special styling for active increment */
body.decimal1-examples .progress-increment.active::before,
body.decimal1-practice .progress-increment.active::before {
    background-color: var(--color-blue-500);
}

/* Increment labels */
body.decimal1-examples .increment-label,
body.decimal1-practice .increment-label {
    background-color: var(--color-white);
    border: 2px solid var(--color-gray-200);
    border-radius: 0.5rem;
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-gray-700);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
    cursor: default;
    min-width: 180px;
    text-align: center;
}

/* Active increment styling */
body.decimal1-examples .progress-increment.active .increment-label,
body.decimal1-practice .progress-increment.active .increment-label {
    border-color: var(--color-blue-500);
    background-color: var(--color-blue-50);
    color: var(--color-blue-800);
    transform: scale(1.02);
    box-shadow: 0 4px 8px rgba(59, 130, 246, 0.2);
}

/* Completed increment styling */
body.decimal1-examples .progress-increment.completed .increment-label,
body.decimal1-practice .progress-increment.completed .increment-label {
    border-color: var(--color-green-500);
    background-color: var(--color-green-50);
    color: var(--color-green-800);
}

/* Add checkmark for completed increments */
body.decimal1-examples .progress-increment.completed .increment-label::after,
body.decimal1-practice .progress-increment.completed .increment-label::after {
    content: '✓';
    margin-left: 0.5rem;
    color: var(--color-green-600);
    font-weight: bold;
}

/* Progress bar markers at 50% mark */
body.decimal1-examples .progress-bar-track::after,
body.decimal1-practice .progress-bar-track::after {
    content: '';
    position: absolute;
    left: -5px;
    right: -5px;
    top: 50%;
    height: 2px;
    background-color: var(--color-gray-400);
    transform: translateY(-1px);
    z-index: 5;
}

/* Responsive adjustments */
@media (max-width: 1200px) {
    body.decimal1-examples .progress-bar-container,
    body.decimal1-practice .progress-bar-container {
        flex-direction: column;
        align-items: center;
    }
    
    body.decimal1-examples .progress-bar-left,
    body.decimal1-practice .progress-bar-left {
        width: 100%;
        margin-bottom: 1rem;
    }
    
    body.decimal1-examples .progress-bar-right,
    body.decimal1-practice .progress-bar-right {
        width: 100%;
        flex-direction: row;
        height: auto;
        justify-content: space-around;
        padding-left: 0;
    }
    
    body.decimal1-examples .progress-increment,
    body.decimal1-practice .progress-increment {
        height: auto;
        flex: 1;
        justify-content: center;
    }
    
    body.decimal1-examples .progress-increment::before,
    body.decimal1-practice .progress-increment::before {
        display: none;
    }
    
    body.decimal1-examples .increment-label,
    body.decimal1-practice .increment-label {
        min-width: auto;
        width: 100%;
        max-width: 200px;
    }
}

@media (max-width: 600px) {
    body.decimal1-examples .progress-bar-right,
    body.decimal1-practice .progress-bar-right {
        flex-direction: column;
        gap: 0.5rem;
    }
    
    body.decimal1-examples .increment-label,
    body.decimal1-practice .increment-label {
        font-size: 0.75rem;
        padding: 0.5rem;
    }
}